<Window
    x:Class="FindAncestor.MainMenuView"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:converters="clr-namespace:FindAncestor.Converters"
    xmlns:vm="clr-namespace:FindAncestor.ViewModels"
    Title="モード選択"
    Width="500"
    Height="700"
    WindowStartupLocation="CenterScreen">
    <Window.DataContext>
        <vm:MainMenuViewModel />
    </Window.DataContext>

    <StackPanel HorizontalAlignment="Stretch" VerticalAlignment="Top">

        <!--  =============================  -->
        <!--  画面設定  -->
        <!--  =============================  -->
        <Expander
            Margin="0,10"
            FontWeight="Bold"
            Header="画面サイズ / スクロール設定"
            IsExpanded="True">

            <StackPanel Margin="10">

                <TextBlock FontWeight="Bold" Text="縦横比" />

                <StackPanel
                    Margin="0,10"
                    HorizontalAlignment="Center"
                    Orientation="Horizontal">

                    <ItemsControl ItemsSource="{Binding DisplaySizes}">
                        <ItemsControl.ItemsPanel>
                            <ItemsPanelTemplate>
                                <StackPanel Orientation="Horizontal" />
                            </ItemsPanelTemplate>
                        </ItemsControl.ItemsPanel>

                        <ItemsControl.ItemTemplate>
                            <DataTemplate>
                                <ToggleButton
                                    Width="110"
                                    Height="50"
                                    Margin="5"
                                    Command="{Binding DataContext.SelectDisplaySizeCommand, RelativeSource={RelativeSource AncestorType=Window}}"
                                    CommandParameter="{Binding}"
                                    Content="{Binding Name}" />
                            </DataTemplate>
                        </ItemsControl.ItemTemplate>
                    </ItemsControl>

                </StackPanel>

                <TextBlock Margin="0,5,0,10" Text="{Binding ImageWidth, StringFormat='横幅: {0} px'}" />

                <Slider
                    IsSnapToTickEnabled="True"
                    Maximum="3000"
                    Minimum="1"
                    TickFrequency="1"
                    Value="{Binding ImageWidth, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}" />

                <StackPanel Margin="0,10,0,10">
                    <TextBlock Text="{Binding ScrollSpeed, StringFormat=速度: {0}}" />
                    <Slider
                        IsSnapToTickEnabled="True"
                        Maximum="20"
                        Minimum="-20"
                        TickFrequency="1"
                        Value="{Binding ScrollSpeed, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}" />
                </StackPanel>

            </StackPanel>
        </Expander>


        <!--  =============================  -->
        <!--  音声設定  -->
        <!--  =============================  -->
        <Expander
            Margin="0,15"
            FontWeight="Bold"
            Header="音声設定"
            IsExpanded="True">

            <StackPanel Margin="10">

                <Button
                    Width="200"
                    HorizontalAlignment="Center"
                    Command="{Binding SelectAudioCommand}"
                    Content="音声フォルダ選択" />

                <TextBlock
                    Margin="0,5"
                    HorizontalAlignment="Center"
                    FontWeight="Bold"
                    Text="{Binding CurrentAudioFileName}" />

                <StackPanel
                    Margin="0,10"
                    HorizontalAlignment="Center"
                    Orientation="Horizontal">

                    <Button
                        Width="60"
                        Margin="5"
                        Command="{Binding PrevAudioCommand}"
                        Content="⏮" />

                    <Button
                        Width="100"
                        Margin="5"
                        Command="{Binding PlayAudioCommand}"
                        Content="▶ 再生" />

                    <Button
                        Width="100"
                        Margin="5"
                        Command="{Binding StopAudioCommand}"
                        Content="■ 停止" />

                    <Button
                        Width="60"
                        Margin="5"
                        Command="{Binding NextAudioCommand}"
                        Content="⏭" />
                </StackPanel>

                <CheckBox
                    Margin="0,5"
                    HorizontalAlignment="Center"
                    Content="ループ再生"
                    IsChecked="{Binding IsLoopEnabled}" />

                <StackPanel Margin="0,20,0,0" HorizontalAlignment="Center">

                    <StackPanel Margin="0,10,0,0">
                        <TextBlock HorizontalAlignment="Center" Text="音量" />
                        <Slider
                            Width="200"
                            Maximum="100"
                            Minimum="0"
                            Value="{Binding AudioVolume}" />
                    </StackPanel>

                    <TextBlock HorizontalAlignment="Center" Text="フェード時間（秒）" />

                    <Slider
                        Width="200"
                        Maximum="5"
                        Minimum="0"
                        Value="{Binding FadeDuration}" />
                </StackPanel>

            </StackPanel>
        </Expander>


        <!--  =============================  -->
        <!--  表示・出力  -->
        <!--  =============================  -->
        <StackPanel Margin="0,20,0,0">

            <Button
                Width="300"
                Height="63"
                Margin="10"
                HorizontalAlignment="Center"
                Command="{Binding OpenScroll1RowCommand}"
                Content="動画再生" />
            <StackPanel Margin="0,10,0,0">
                <TextBlock HorizontalAlignment="Center" Text="保存時間（秒）" />
                <Slider
                    Width="200"
                    IsSnapToTickEnabled="True"
                    Maximum="60"
                    Minimum="5"
                    TickFrequency="5"
                    Value="{Binding ExportDurationSeconds}" />
            </StackPanel>
            <StackPanel
                Margin="0,10"
                HorizontalAlignment="Center"
                Orientation="Horizontal">
                <Button
                    Margin="5"
                    Command="{Binding ExportPngCommand}"
                    Content="PNGで出力" />
                <Button
                    Margin="5"
                    Command="{Binding ExportJpegCommand}"
                    Content="JPEGで出力" />
            </StackPanel>
            <StackPanel Margin="0,20,0,0" Orientation="Vertical">

                <TextBlock Text="保存先フォルダ" />
                <ComboBox ItemsSource="{Binding ImageFolders}" SelectedItem="{Binding SelectedImageFolder}" />

                <TextBlock Margin="0,10,0,0" Text="保存形式" />
                <ComboBox ItemsSource="{Binding ImageSaveFormats}" SelectedItem="{Binding SelectedImageSaveFormat}" />

                <StackPanel
                    Margin="0,10,0,0"
                    HorizontalAlignment="Center"
                    Orientation="Horizontal">

                    <Button
                        Width="120"
                        Margin="5"
                        Command="{Binding AddImageToFolderCommand}"
                        Content="画像追加" />

                    <Button
                        Width="120"
                        Margin="5"
                        Command="{Binding DeleteImagesInFolderCommand}"
                        Content="フォルダ削除" />

                </StackPanel>

            </StackPanel>
        </StackPanel>
    </StackPanel>
</Window>